<?xml version="1.0" encoding="utf-8"?>
<template id="40001" name="backend_parent_revise_process" desc="后台改价改价父流程" parent="">

    <metadata>
        <status no="-1" name="init" desc="流程初始化"/>
        <status no="1" name="revising" desc="改价中"/>
        <status no="2" name="accepted" desc="改价项已完成"/>
        <status no="3" name="rejected" desc="改价项已拒绝"/>
        <status no="4" name="canceled" desc="改价项已取消"/>
    </metadata>

    <init>
        <handler seq="1" ref="processCreateReviseHandler" desc="创建后台改价父流程"/>
    </init>

    <accepted>
        <handler seq="1" ref="processAcceptedTrigger" desc="后台改价父流程完成后trigger"/>
    </accepted>

    <rejected>
        <handler seq="1" ref="processRejectedTrigger" desc="后台改价父流程拒绝后trigger"/>
    </rejected>

    <canceled>
        <handler seq="1" ref="processCanceledTrigger" desc="后台改价父流程关闭后trigger"/>
    </canceled>

    <action id="40101" name="upper_enroll" desc="UP主报名D活动" destination="1" entrance="true">
        <handler seq="1" ref="validateUpperEnrollDHandler" desc="检验UP主重复报名D类任务处理器"/>
        <handler seq="2" ref="delegateRegisterUpperHandler" desc="委托注册UP主处理器"/>
    </action>

    <action id="40102" name="enroll_attach_tag" desc="稿件绑定标签" destination="2">
        <handler seq="1" ref="upperDPromoteToIngHandler" desc="UP主推进D类任务到进行中处理器"/>
        <handler seq="2" ref="buildDraftTagRelationHandler" desc="构建稿件标签映射关系处理器"/>
    </action>

    <action id="40103" name="detach_all_tag" desc="取消绑定标签" destination="1">
        <handler seq="1" ref="upperDRevokeToSignUpHandler" desc="UP的D类任务状态回退到已报名"/>
        <handler seq="2" ref="buildDraftTagRelationHandler" desc="构建稿件标签映射关系处理器"/>
    </action>

    <action id="40104" name="attach_tag_enroll" desc="标签报名" destination="2" entrance="true">
        <handler seq="1" ref="delegateRegisterUpperHandler" desc="委托注册UP主处理器"/>
        <handler seq="2" ref="validateTagEnrollDHandler" desc="检验UP主重复报名D类任务处理器"/>
    </action>

    <action id="40105" name="finish_no_rewards" desc="完成活动" destination="4">
        <handler seq="1" ref="commonValidationHandler" desc="通用验证handler demo"/>
        <handler seq="2" ref="commonProcessHandler" desc="通用流程控制器demo"/>
    </action>

    <action id="40106" name="finish_with_rewards" desc="导入中奖名单" destination="3">
        <handler seq="1" ref="commonValidationHandler" desc="通用验证handler demo"/>
        <handler seq="2" ref="commonProcessHandler" desc="通用流程控制器demo"/>
    </action>

</template>
